commands:
  01_install_redis:
    command: |
      amazon-linux-extras install -y redis6
      yum install -y php-redis
      systemctl enable redis
      systemctl start redis
      # Verify installation
      redis-cli ping || exit 1

container_commands:
  01_redis_extension:
    command: |
      echo "extension=redis.so" >> /etc/php.ini
      php -m | grep redis || exit 1
  02_redis_restart:
    command: |
      systemctl restart php-fpm
      systemctl restart nginx
  03_clear_cache:
    command: |
      php artisan cache:clear
      php artisan config:clear
      php artisan config:cache